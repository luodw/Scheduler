# Scheduler

最近再看看kafka源码，有个任务调度器挺有意思的，所以自己用C++写了一个很简单的调度器，支持
1. 立即调度
2. 延迟调度
3. 循环调度

这是第二个版本，即采用线程池技术，但是这个版本使用场景不多，因为如果调度了四个无限循环的任务，则后续的任务就无法再进行调度了。但是如果像是leveldb那样，把内存数据持久化到磁盘作为一个任务，则这就可以使用。即当memtable内存到达阈值之后，即可将memtable持久化到磁盘当做一个任务进行调度。

# 原理

原理很简单，和大部分调度器类似，也是生产者和消费者模型。有一个队列保存所有的任务，开启n个线程不断消费队列里的任务，调度器所在线程往队列中添加任务。
